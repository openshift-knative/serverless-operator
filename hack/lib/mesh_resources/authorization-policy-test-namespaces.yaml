---
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: allow-traffic-to-tenant-1
  namespace: tenant-1
spec:
  action: ALLOW
  rules:
    - from:
        - source:
            namespaces: ["tenant-1", "knative-serving", "istio-system"]
---
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: allow-traffic-to-tenant-2
  namespace: tenant-2
spec:
  action: ALLOW
  rules:
    - from:
        - source:
            namespaces: ["tenant-2", "knative-serving", "istio-system"]
---
# Source: knative-istio-authz-onboarding/templates/allow-knative-to-ns.yaml
# Allow namespace serverless-tests to receive requests from Knative system components.
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: allow-from-knative
  namespace: serverless-tests
spec:
  action: ALLOW
  rules:
    - from:
        - source:
            namespaces:
              - "serverless-tests"
              - "knative-eventing"
              - "knative-serving"
              - "istio-system"
